@using EA.Iws.Web.Areas.ExportMovement.Views.EditDate;
@model EA.Iws.Web.Areas.ExportMovement.ViewModels.EditDate.EditDateViewModel
@{
    ViewBag.Title = IndexResources.PageTitle;
}

<header><h1 class="heading-large">@IndexResources.MainHeading</h1></header>

@Html.Gds().ValidationSummary()

<p>@IndexResources.GuidanceParagraph1</p>

<div class="form-group">
    <table>
        <thead>
            <tr>
                <th colspan="2">
                    @IndexResources.PreviousDatesTableHeading
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>@IndexResources.OriginalDateHeading</td>
                <td>@Html.Gds().DisplayDate(Model.DateEditHistory[0])</td>
            </tr>
            @for (int i = 1; i < Model.DateEditHistory.Count; i++)
            {
                <tr>
                    <td>@string.Format(IndexResources.PreviousDateHeading, i)</td>
                    <td>@Html.Gds().DisplayDate(Model.DateEditHistory[i])</td>
                </tr>
            }
        </tbody>
    </table>
</div>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    for (int i = 0; i < Model.DateEditHistory.Count; i++)
    {
        @Html.HiddenFor(m => m.DateEditHistory[i])
    }
    <div class="form-group @Html.Gds().FormGroupClass(m => m.Day) @Html.Gds().FormGroupClass(m => m.Month) @Html.Gds().FormGroupClass(m => m.Year)">
        <fieldset>
            <legend>
                <span class="form-label">@IndexResources.NewDateLabel</span>
            </legend>
            <div class="form-date">
                @Html.Gds().HintParagraph(IndexResources.DateHintParagraph)
                @Html.Gds().ValidationMessageFor(m => m.Day)
                @Html.Gds().ValidationMessageFor(m => m.Month)
                @Html.Gds().ValidationMessageFor(m => m.Year)
                <div class="form-group form-group-day">
                    @Html.Gds().LabelFor(m => m.Day)
                    @Html.Gds().TextBoxFor(m => m.Day, new { type = "number", min = "1", max = "31" })
                </div>
                <div class="form-group form-group-month">
                    @Html.Gds().LabelFor(m => m.Month)
                    @Html.Gds().TextBoxFor(m => m.Month, new { type = "number", min = "1", max = "12" })
                </div>
                <div class="form-group form-group-year">
                    @Html.Gds().LabelFor(m => m.Year)
                    @Html.Gds().TextBoxFor(m => m.Year, new { type = "number", min = "2015" })
                </div>
            </div>
        </fieldset>
    </div>

    <div class="form-group">
        <button class="button" type="submit">@Constants.ContinueButtonText</button>
    </div>

    <div>
        @Html.ActionLink("Go to notification options", "Index", "Options",
                new { id = Model.NotificationId, area = "NotificationApplication" }, null)
    </div>
}