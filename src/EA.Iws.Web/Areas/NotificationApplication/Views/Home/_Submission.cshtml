@model EA.Iws.Web.Areas.NotificationApplication.ViewModels.NotificationApplication.SubmitSideBarViewModel
@using EA.Iws.Core.Notification;
@using EA.Iws.Core.NotificationAssessment

<section class="grid-row">
    <div class="noti-overview">
        <div class="column-half">
            <h2 class="heading-medium">@Model.NotificationNumber</h2>
            <h1 class="heading-large">Notification overview</h1>

            @if (Model.ShowSubmitButton)
            {
                @Html.ActionLink("Submit notification", "Disclaimer", "Submit", null, new { @class = "button" })
            }

            else if (Model.ShowDisabledSubmitButtonAndGuidanceText)
            {
                <a href="#" class="button" disabled="disabled">Submit notification</a>
                <p>You can submit this notification once you've completed all sections</p>
            }

            else if (Model.ShowResubmitButton)
            {
                using (Html.BeginForm("Resubmit","Home", FormMethod.Post, new { id = Model.NotificationId }))
                {
                    @Html.AntiForgeryToken()

                    <input type="submit" class="button" value="Resubmit notification"/>
                }
            }
        </div>

        <div class="column-half charge">

            <div class="status">
                <span>Overall status</span>
                <span class="statusbox @Html.ExportStatus().DisplayColorClass(Model.Status)">@EA.Prsd.Core.Helpers.EnumHelper.GetDisplayName(Model.Status).ToUpper()</span>
            </div>

            @if (Model.Charge > 0)
            {
                <div class="noti-charge">
                    <span>Notification<br />charge</span>
                    <span class="price">&pound;@Model.Charge</span>
                    <div class="vat-message">
                        All charges for environmental<br/> permits and licences are outside<br/> the scope of VAT
                    </div>
                </div>
            }

            <div class="noti-links">
                @if (Model.CompetentAuthority == UKCompetentAuthority.Scotland)
                {
                    @Html.ActionLink("Bank guarantee template", "GenerateBankGuaranteeDocument", "Home", new { area = "FinancialGuarantee" }, null)
                    <br/>
                    @Html.ActionLink("Parent company template", "GenerateParentCompanyDocument", "Home", new { area = "FinancialGuarantee" }, null)
                }
                else
                {
                    @Html.ActionLink("Download financial guarantee", "GenerateFinancialGuaranteeDocument", "Home", new { area = "FinancialGuarantee", competentAuthority = Model.CompetentAuthority }, null)
                }
                <br/>
                @if (Model.Status != NotificationStatus.NotSubmitted)
                {
                    @Html.ActionLink("Download notification", "GenerateNotificationDocument", "Home", new { id = Model.NotificationId }, null)
                }
            </div>
        </div>
    </div>

    @if (!Model.IsNotificationComplete)
    {
        <div class="noti-alert">
            <em>ALERT:</em> You need to address the highlighted section(s)
        </div>
    }

</section>