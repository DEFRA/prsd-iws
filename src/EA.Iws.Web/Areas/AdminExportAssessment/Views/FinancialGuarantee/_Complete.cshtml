@using EA.Iws.Core.Admin
@using EA.Iws.Core.FinancialGuarantee
@model EA.Iws.Web.Areas.AdminExportAssessment.ViewModels.FinancialGuarantee.FinancialGuaranteeDecisionViewModel

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.Gds().ValidationSummary()
    @Html.HiddenFor(m => m.Status)
    @Html.HiddenFor(m => m.IsApplicationCompleted)
    @Html.HiddenFor(m => m.CompletedDate)
    @Html.HiddenFor(m => m.ReceivedDate)

    <div class="form-group">
        @Html.Gds().LabelFor(m => m.Decision, false)
        @Html.Gds().DropDownListFor(m => m.Decision, Model.PossibleDecisions, string.Empty, new { id = "decision-select" })
    </div>

    <div id="status" class="js-hidden">
        <div class="form-group @Html.Gds().FormGroupClass(m => m.DecisionMadeDate.Day) @Html.Gds().FormGroupClass(m => m.DecisionMadeDate.Month) @Html.Gds().FormGroupClass(m => m.DecisionMadeDate.Year)">
            @Html.Gds().LabelFor(m => m.DecisionMadeDate, false)
            @Html.Gds().ValidationMessageFor(m => m.DecisionMadeDate)
            @Html.EditorFor(m => m.DecisionMadeDate)
        </div>

        <div id="@Html.Raw("status" + FinancialGuaranteeDecision.Approved)" class="js-hidden guarantee-decision">
            @Html.Partial("_Approve")
        </div>

        <div id="@Html.Raw("status" + FinancialGuaranteeDecision.Refused)" class="js-hidden guarantee-decision">
            @Html.Partial("_Refuse")
        </div>

        <div id="@Html.Raw("status" + FinancialGuaranteeDecision.Released)" class="js-hidden guarantee-decision">
            @Html.Partial("_Release")
        </div>
    </div>

    <div class="form-group">
        <button class="button" type="submit" name="submit" value="decision">@Constants.ContinueButtonText</button>
    </div>
}
