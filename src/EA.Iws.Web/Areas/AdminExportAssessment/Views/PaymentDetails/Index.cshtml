@using EA.Iws.Web.Areas.AdminExportAssessment.ViewModels.PaymentDetails
@using EA.Iws.Web.Areas.AdminExportAssessment.Views.PaymentDetails
@model PaymentDetailsViewModel

@{
    ViewBag.Title = @IndexResources.MainHeading;
}

<h1 class="heading-large">@IndexResources.MainHeading</h1>

<dl>
    <dd class="bold-small">@IndexResources.PaymentDue</dd>
    <dt>@Model.ChargeDue.ToString("C")</dt>
</dl>

<hr/>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.Gds().ValidationSummary()
    @Html.HiddenFor(m => m.NotificationId)

    <div class="grid-row">
        <div class="column-two-thirds">

            <div class="grid-row">
                <div class="column-half">
                    <div class="form-group @Html.Gds().FormGroupClass(m => m.Amount)">
                        @Html.Gds().LabelFor(m => m.Amount)
                        @Html.Gds().ValidationMessageFor(m => m.Amount)
                        @Html.Gds().TextBoxFor(m => m.Amount, new { @class = "form-control form-control-wide", @title = PaymentDetailsViewModelResources.AmountPaidLabel })
                    </div>
                </div>
                <div class="column-half">
                    <div class="form-group @Html.Gds().FormGroupClass(m => m.PaymentMethod)">
                        @Html.Gds().LabelFor(m => m.PaymentMethod)
                        @Html.Gds().ValidationMessageFor(m => m.PaymentMethod)
                        @Html.Gds().DropDownListFor(m => m.PaymentMethod, Model.PaymentMethodsSelectList, string.Empty, new { @class = "form-control form-control-wide", title = PaymentDetailsViewModelResources.PaymentMethodLabel })
                    </div>
                </div>
            </div>

            <div class="form-group @Html.Gds().FormGroupClass(m => m.Receipt)" id="receiptArea">
                @Html.Gds().LabelFor(m => m.Receipt, showOptionalLabel: false)
                @Html.Gds().ValidationMessageFor(m => m.Receipt)
                @Html.Gds().TextBoxFor(m => m.Receipt, new { @MaxLength = 100, @class = "form-control form-control-wide", @title = PaymentDetailsViewModelResources.ReceiptNumberLabel })
            </div>

        </div>
    </div>

    <hr>

    <div class="grid-row">
        <div class="column-two-thirds">
                <div class="form-group @Html.Gds().FormGroupClass(m => m.Date) @Html.Gds().FormGroupClass(m => m.Date.Day) @Html.Gds().FormGroupClass(m => m.Date.Month) @Html.Gds().FormGroupClass(m => m.Date.Year)">
                   @Html.LabelFor(m => m.Date, new { @class = "form-label-bold" })
                   @Html.Gds().ValidationMessageFor(m => m.Date)
                   @Html.EditorFor(m => m.Date)
                </div>
        </div>
    </div>

    <div class="grid-row">
        <div class="column-two-thirds">
            <div class="form-group @Html.Gds().FormGroupClass(m => m.Comments)">
                @Html.Gds().LabelFor(m => m.Comments)
                @Html.Gds().ValidationMessageFor(m => m.Comments)
                @Html.TextAreaFor(m => m.Comments, new { @MaxLength = 500, @style = "width: 100%; height: 200px", @title = PaymentDetailsViewModelResources.CommentsLabel })
            </div>
        </div>
    </div>

    <div class="form-group">
        <p> <button class="button" type="submit">@Constants.ContinueButtonText</button></p>
    </div>

}

@section scripts
{
    <script>
        $('#PaymentMethod').change(function ()
        {
            if ($('#PaymentMethod option:selected').text() === 'Cheque') {
                $('#receiptArea').show();
            } else {
                $('#receiptArea').hide();
            }
            
        });
    </script>
}

@section menu {
    @Html.Action("ExportNavigation", "Menu", new { area = "Admin", section = ExportNavigationSection.Finance })
}