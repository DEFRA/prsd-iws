@using EA.Iws.Core.Shared
@model EA.Iws.Web.ViewModels.Shared.BusinessTypeViewModel

@{
    string soleTraderRegistrationNumber = ViewBag.SoleTraderRegistrationNumber;
    string soleTraderAdditionalRegistrationNumber = ViewBag.SoleTraderAdditionalRegistrationNumber;
    string partnershipRegistrationNumber = ViewBag.PartnershipRegistrationNumber;
    string partnershipAdditionalRegistrationNumber = ViewBag.PartnershipAdditionalRegistrationNumber;
    string companyRegistrationNumber = ViewBag.CompanyRegistrationNumber;
    string companyAdditionalRegistrationNumber = ViewBag.SoleTraderRegistrationNumber;
    string otherRegistrationNumber = ViewBag.OtherRegistrationNumber;
    string otherAdditionalRegistrationNumber = ViewBag.OtherAdditionalRegistrationNumber;
    string nonJavascriptMessage = ViewBag.NonJavascriptMessage;
}

<div class="form-group @Html.Gds().FormGroupClass(m => m.Name)">
    @Html.Gds().LabelFor(m => m.Name)
    @Html.Gds().ValidationMessageFor(m => m.Name)
    @Html.Gds().TextBoxFor(m => m.Name)
</div>

<div class="form-group @Html.Gds().FormGroupClass(m => m.BusinessType)">
    @Html.Gds().LabelFor(m => m.BusinessType)
    @Html.Gds().ValidationMessageFor(m => m.BusinessType)
    <label class="block-label" data-target="sole-trader-number">
        @Html.RadioButtonFor(m => m.BusinessType, "SoleTrader", new { @class = "business-type-radio-button" }) @EA.Prsd.Core.Helpers.EnumHelper.GetDisplayName(BusinessType.SoleTrader)
    </label>
    <div class="panel-indent hide-for-initial-load @(Model.BusinessType != null && Model.BusinessType.Equals("Sole trader") ? "" : "js-hidden")" id="sole-trader-number">
        @if (!string.IsNullOrWhiteSpace(soleTraderRegistrationNumber))
        {
            <span class="form-hint">@soleTraderRegistrationNumber</span>
        }
        @if (!string.IsNullOrWhiteSpace(soleTraderAdditionalRegistrationNumber))
        {
            <span class="form-hint" data-name="additional-hint">@soleTraderAdditionalRegistrationNumber</span>
        }
    </div>

    <label class="block-label" data-target="partnership-number">
        @Html.RadioButtonFor(m => m.BusinessType, "Partnership", new { @class = "business-type-radio-button" }) @EA.Prsd.Core.Helpers.EnumHelper.GetDisplayName(BusinessType.Partnership)
    </label>
    <div class="panel-indent hide-for-initial-load @(Model.BusinessType != null && Model.BusinessType.Equals("Partnership") ? "" : "js-hidden")" id="partnership-number">
        @if (!string.IsNullOrWhiteSpace(partnershipRegistrationNumber))
        {
            <span class="form-hint">@partnershipRegistrationNumber</span>
        }
        @if (!string.IsNullOrWhiteSpace(partnershipAdditionalRegistrationNumber))
        {
            <span class="form-hint" data-name="additional-hint">@partnershipAdditionalRegistrationNumber</span>
        }
    </div>

    <label class="block-label" data-target="companies-house-number">
        @Html.RadioButtonFor(m => m.BusinessType, "LimitedCompany", new { @class = "business-type-radio-button" }) @EA.Prsd.Core.Helpers.EnumHelper.GetDisplayName(BusinessType.LimitedCompany)
    </label>
    <div class="panel-indent hide-for-initial-load @(Model.BusinessType != null && Model.BusinessType.Equals("Limited company") ? "" : "js-hidden")" id="companies-house-number">
        @if (!string.IsNullOrWhiteSpace(companyRegistrationNumber))
        {
            <span class="form-hint">@companyRegistrationNumber</span>
        }
        @if (!string.IsNullOrWhiteSpace(companyAdditionalRegistrationNumber))
        {
            <span class="form-hint" data-name="additional-hint">@companyAdditionalRegistrationNumber</span>
        }
    </div>

    <label class="block-label" data-target="other-description">
        @Html.RadioButtonFor(m => m.BusinessType, BusinessType.Other, new { @class = "business-type-radio-button" }) @EA.Prsd.Core.Helpers.EnumHelper.GetDisplayName(BusinessType.Other)
    </label>
    <div class="panel-indent hide-for-initial-load @(Model.BusinessType != null && Model.BusinessType == BusinessType.Other ? "" : "js-hidden")" id="other-description">
        <div class="form-group @Html.Gds().FormGroupClass(m => m.OtherDescription)">
            @Html.Gds().LabelFor(m => m.OtherDescription)
            @Html.Gds().ValidationMessageFor(m => m.OtherDescription)
            @Html.Gds().TextBoxFor(m => m.OtherDescription)
        </div>
        @if (!string.IsNullOrWhiteSpace(otherRegistrationNumber))
        {
            <span class="form-hint">@otherRegistrationNumber</span>
        }
        @if (!string.IsNullOrWhiteSpace(otherAdditionalRegistrationNumber))
        {
            <span class="form-hint" data-name="additional-hint">@otherAdditionalRegistrationNumber</span>
        }
    </div>
</div>

<div class="js-hidden" id="registration-block">
    <div class="form-group @Html.Gds().FormGroupClass(m => m.RegistrationNumber)" data-validation-behaviour="ignore-parent">
        @Html.Gds().LabelFor(m => m.RegistrationNumber)
        @if (!string.IsNullOrWhiteSpace(nonJavascriptMessage))
        {
            <span class="form-hint js-hidden">@nonJavascriptMessage</span>
        }
        @Html.Gds().ValidationMessageFor(m => m.RegistrationNumber)
        @Html.Gds().TextBoxFor(m => m.RegistrationNumber)

        <details data-target="companies-house-number" class="margin-top-15">
            <summary><span class="summary">Where can I find my Companies House number?</span></summary>
            <div class="panel-indent">
                <p>
                    Your Companies House number is on your organisation's certificate of incorporation.
                    You can also get the number from your organisation's accountant or accounts department, or
                    <a href="http://wck2.companieshouse.gov.uk">search the Companies House online services</a>
                </p>
            </div>
        </details>
    </div>

    <div class="form-group @Html.Gds().FormGroupClass(m => m.AdditionalRegistrationNumber)">
        @Html.Gds().LabelFor(m => m.AdditionalRegistrationNumber)
        @Html.Gds().ValidationMessageFor(model => model.AdditionalRegistrationNumber)
        @Html.Gds().TextBoxFor(m => m.AdditionalRegistrationNumber)
    </div>
</div>