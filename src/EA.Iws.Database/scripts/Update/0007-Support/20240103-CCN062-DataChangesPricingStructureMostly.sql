--Add shipment ranges for new EA charge matrix
-- 1-5
insert into [Lookup].[ShipmentQuantityRange] VALUES ('87443EEB-31F5-423F-905A-33ABE23F01F6', 1, 5);
-- 101-300
insert into [Lookup].[ShipmentQuantityRange] VALUES ('42ECE92D-6470-4B42-BA6A-D8E7FE65A402', 101, 300);
-- 301-500
insert into [Lookup].[ShipmentQuantityRange] VALUES ('8810022E-11D4-4C25-880B-185787F65053', 301, 500);

GO
--Add column for determining when Pricing Structure is in effect
ALTER TABLE [Lookup].[PricingStructure] Add [ValidFrom] date NOT NULL CONSTRAINT [DF_ValidFrom] DEFAULT '19700101';

GO
ALTER TABLE [Lookup].[PricingStructure] DROP CONSTRAINT [DF_ValidFrom];

GO
--Add New EA charge matrix
DECLARE @validFrom nvarchar(100);
SET @validFrom = (SELECT [Value] from [Lookup].[SystemSettings] where Id = 1);

INSERT INTO [Lookup].[PricingStructure] (Id, CompetentAuthority, ShipmentQuantityRangeId, ActivityId, Price, PotentialRefund, ValidFrom) 
	VALUES 	 
	-- Export Recovery IsInterim 0 Range 1-5
	 ('4A9B7A48-C268-4133-A2FE-B05908C5172F', 1, '87443EEB-31F5-423F-905A-33ABE23F01F6', '75496653-C767-44D2-AA27-A4C9010901C7', '3227.00', '0.00', @validFrom),
	-- Export Recovery IsInterim 0 Range 6-20
	 ('596970BA-A5D8-4AD2-BFD2-D5FD227283A8', 1, '805CC74A-1D68-44B9-ADC3-A4C90107D231', '75496653-C767-44D2-AA27-A4C9010901C7', '3636.00', '409.00', @validFrom),
	-- Export Recovery IsInterim 0 Range 21-100
	 ('E1322D54-CB2C-4D77-BE4C-DC8990A4714F', 1, '85270610-00B0-4C09-A1DB-A4C90107D231', '75496653-C767-44D2-AA27-A4C9010901C7', '4560.00', '1333.00', @validFrom),
	-- Export Recovery IsInterim 0 Range 101-300
	 ('2DBB1900-D25C-4D5C-829C-136C02BB6F8D', 1, '42ECE92D-6470-4B42-BA6A-D8E7FE65A402', '75496653-C767-44D2-AA27-A4C9010901C7', '6597.00', '3370.00', @validFrom),
	 -- Export Recovery IsInterim 0 Range 301-500
	 ('FB01FC44-9BF2-4EB1-BE05-99F304FB6E43', 1, '8810022E-11D4-4C25-880B-185787F65053', '75496653-C767-44D2-AA27-A4C9010901C7', '9557.00', '6330.00', @validFrom),
	-- Export Recovery IsInterim 0 Range 501-
	 ('7F119A10-1496-4796-B5BD-850D1C9373F7', 1, 'AEF5F83D-E5FB-41B2-84D7-A4C90107D231', '75496653-C767-44D2-AA27-A4C9010901C7', '11962.00', '8735.00', @validFrom),

	-- Export Recovery IsInterim 1 Range 1--5
	 ('9941C27C-979D-4035-9B32-7E0C9FF60E26', 1, '87443EEB-31F5-423F-905A-33ABE23F01F6', '71CC7688-63D3-4312-BAD2-A4C9010901C7', '3227.00', '0.00', @validFrom),
	-- Export Recovery IsInterim 1 Range 6-20
	 ('40969F9B-9D47-4ED5-A36D-3A957008C7C5', 1, '805CC74A-1D68-44B9-ADC3-A4C90107D231', '71CC7688-63D3-4312-BAD2-A4C9010901C7', '3636.00', '409.00', @validFrom),
	-- Export Recovery IsInterim 1 Range 21-100
	 ('2DFA8119-5DB1-4B1D-A22D-F407DB059650', 1, '85270610-00B0-4C09-A1DB-A4C90107D231', '71CC7688-63D3-4312-BAD2-A4C9010901C7', '4560.00', '1333.00', @validFrom),
	-- Export Recovery IsInterim 1 Range 101-300
	 ('FC4AEBEE-98F4-4255-A6AE-EBE05BF385FB', 1, '42ECE92D-6470-4B42-BA6A-D8E7FE65A402', '71CC7688-63D3-4312-BAD2-A4C9010901C7', '6597.00', '3370.00', @validFrom),
	 -- Export Recovery IsInterim 1 Range 301-500
	 ('A20C6DEA-3016-4329-9F17-1180974BFAEC', 1, '8810022E-11D4-4C25-880B-185787F65053', '71CC7688-63D3-4312-BAD2-A4C9010901C7', '9557.00', '6330.00', @validFrom),
	-- Export Recovery IsInterim 1 Range 501-
	 ('811304BC-9DA4-44BF-AA4C-15F52E8AC1FC', 1, 'AEF5F83D-E5FB-41B2-84D7-A4C90107D231', '71CC7688-63D3-4312-BAD2-A4C9010901C7', '11962.00', '8735.00', @validFrom),

	-- Export Disposal IsInterim 0 Range 1-5
	 ('34AD9BDC-D914-4BBF-BBC3-F449BC80A3D4', 1, '87443EEB-31F5-423F-905A-33ABE23F01F6', '12AF7EA4-1E60-4D35-B965-A4C9010901C7', '3610.00', '0.00', @validFrom),
	-- Export Disposal IsInterim 0 Range 6-20
	 ('7881DFE2-C1E6-45A8-932C-DBC77460DFE9', 1, '805CC74A-1D68-44B9-ADC3-A4C90107D231', '12AF7EA4-1E60-4D35-B965-A4C9010901C7', '4067.00', '475.00', @validFrom),
	-- Export Disposal IsInterim 0 Range 21-100
	 ('7E1932AD-4F1D-453A-AE18-3D6BC144B3D0', 1, '85270610-00B0-4C09-A1DB-A4C90107D231', '12AF7EA4-1E60-4D35-B965-A4C9010901C7', '5101.00', '1491.00', @validFrom),
	-- Export Disposal IsInterim 0 Range 101-300
	 ('061E00E2-0475-458F-AD38-138BC6E0D375', 1, '42ECE92D-6470-4B42-BA6A-D8E7FE65A402', '12AF7EA4-1E60-4D35-B965-A4C9010901C7', '7380.00', '3770.00', @validFrom),
	 -- Export Disposal IsInterim 0 Range 301-500
	 ('1043137A-B0D2-4DAA-A442-C6CACE1D82A3', 1, '8810022E-11D4-4C25-880B-185787F65053', '12AF7EA4-1E60-4D35-B965-A4C9010901C7', '10690.00', '7080.00', @validFrom),
	-- Export Disposal IsInterim 0 Range 501-
	 ('69F9F2C8-457F-420F-BC1C-5B4D26206874', 1, 'AEF5F83D-E5FB-41B2-84D7-A4C90107D231', '12AF7EA4-1E60-4D35-B965-A4C9010901C7', '13381.00', '9771.00', @validFrom),

	-- Export Disposal IsInterim 1 Range 1-5
	 ('461696D8-691E-4861-9B9B-6CC07C780199', 1, '87443EEB-31F5-423F-905A-33ABE23F01F6', '8385CAD7-E5F0-4765-A46B-A4C9010901C7', '3610.00', '0.00', @validFrom),
	-- Export Disposal IsInterim 1 Range 6-20
	 ('442C6967-7C77-45F2-95A7-7428E379012A', 1, '805CC74A-1D68-44B9-ADC3-A4C90107D231', '8385CAD7-E5F0-4765-A46B-A4C9010901C7', '4067.00', '457.00', @validFrom),
	-- Export Disposal IsInterim 1 Range 21-100
	 ('6EB813A0-66BB-4D67-AB76-015555FA3C41', 1, '85270610-00B0-4C09-A1DB-A4C90107D231', '8385CAD7-E5F0-4765-A46B-A4C9010901C7', '5101.00', '1491.00', @validFrom),
	-- Export Disposal IsInterim 1 Range 101-300
	 ('DC23968D-E47E-42F7-868B-745EB289C544', 1, '42ECE92D-6470-4B42-BA6A-D8E7FE65A402', '8385CAD7-E5F0-4765-A46B-A4C9010901C7', '7380.00', '3770.00', @validFrom),
	 -- Export Disposal IsInterim 1 Range 301-500
	 ('0AEE9C43-4F3B-4697-99AB-AA0142C1A18D', 1, '8810022E-11D4-4C25-880B-185787F65053', '8385CAD7-E5F0-4765-A46B-A4C9010901C7', '10690.00', '7080.00', @validFrom),
	-- Export Disposal IsInterim 1 Range 501-1000
	 ('2392B4B4-6D4C-47E5-A11D-88FA3311C903', 1, 'AEF5F83D-E5FB-41B2-84D7-A4C90107D231', '8385CAD7-E5F0-4765-A46B-A4C9010901C7', '13381.00', '9771.00', @validFrom),

	 
	 -- Import Recovery IsInterim 0 Range 1-5
	 ('98F8FEC8-C4AC-468F-BE9D-93C4DF3196D3', 1, '87443EEB-31F5-423F-905A-33ABE23F01F6', 'F0407E39-C9BA-4519-B659-A4C9010901C7', '3330.00', '0.00', @validFrom),
	-- Import Recovery IsInterim 0 Range 6-20
	 ('4CF6E446-B780-4731-B07E-D65BC674C11F', 1, '805CC74A-1D68-44B9-ADC3-A4C90107D231', 'F0407E39-C9BA-4519-B659-A4C9010901C7', '3739.00', '409.00', @validFrom),
	-- Import Recovery IsInterim 0 Range 21-100
	 ('284BB7DB-E904-4C1B-BB08-271B40D4B2C6', 1, '85270610-00B0-4C09-A1DB-A4C90107D231', 'F0407E39-C9BA-4519-B659-A4C9010901C7', '4663.00', '1333.00', @validFrom),
	-- Import Recovery IsInterim 0 Range 101-300
	 ('5A629793-4A7A-4D46-99D3-57330CE3AE7C', 1, '42ECE92D-6470-4B42-BA6A-D8E7FE65A402', 'F0407E39-C9BA-4519-B659-A4C9010901C7', '6700.00', '3370.00', @validFrom),
	-- Import Recovery IsInterim 0 Range 301-500
	 ('26DFB444-26D7-45CA-9AB6-40D4697CA4BA', 1, '8810022E-11D4-4C25-880B-185787F65053', 'F0407E39-C9BA-4519-B659-A4C9010901C7', '9660.00', '6330.00', @validFrom),
	-- Import Recovery IsInterim 0 Range 501-
	 ('2D4465CA-44C9-43FE-B5CA-DEA885EE9765', 1, 'AEF5F83D-E5FB-41B2-84D7-A4C90107D231', 'F0407E39-C9BA-4519-B659-A4C9010901C7', '12065.00', '8735.00', @validFrom),

	-- Import Recovery IsInterim 1 Range 1-5
	 ('1CC80568-5A30-424B-B12C-B267FA134A9D', 1, '87443EEB-31F5-423F-905A-33ABE23F01F6', 'DAF51836-41E0-4324-93AE-A4C9010901C7', '3330.00', '0.00', @validFrom),
	-- Import Recovery IsInterim 1 Range 6-20
	 ('5764F625-79FB-4127-B5B6-CC22128B62E5', 1, '805CC74A-1D68-44B9-ADC3-A4C90107D231', 'DAF51836-41E0-4324-93AE-A4C9010901C7', '3739.00', '409.00', @validFrom),
	-- Import Recovery IsInterim 1 Range 21-100
	 ('CAC2E453-19E8-4CDC-9B80-65EF4985F7D6', 1, '85270610-00B0-4C09-A1DB-A4C90107D231', 'DAF51836-41E0-4324-93AE-A4C9010901C7', '4663.00', '1333.00', @validFrom),
	-- Import Recovery IsInterim 1 Range 101-300
	 ('FE866DB8-B5A2-4919-99F6-88456572B102', 1, '42ECE92D-6470-4B42-BA6A-D8E7FE65A402', 'DAF51836-41E0-4324-93AE-A4C9010901C7', '6700.00', '3370.00', @validFrom),
	-- Import Recovery IsInterim 1 Range 301-500
	 ('08B76DBD-0F75-451F-84C2-5E965752B92A', 1, '8810022E-11D4-4C25-880B-185787F65053', 'DAF51836-41E0-4324-93AE-A4C9010901C7', '9660.00', '6330.00', @validFrom),
	-- Import Recovery IsInterim 1 Range 501-
	 ('DD99B95E-F719-4CE7-B5E7-8340E9E20F4C', 1, 'AEF5F83D-E5FB-41B2-84D7-A4C90107D231', 'DAF51836-41E0-4324-93AE-A4C9010901C7', '12065.00', '8735.00', @validFrom),
	 
	-- Import Disposal IsInterim 0 Range 1-5
	 ('6CF3966E-1FF0-49CB-A73D-D890DCDA6ABB', 1, '87443EEB-31F5-423F-905A-33ABE23F01F6', 'E5D7D07A-1FC3-45AC-AE0F-A4C9010901C7', '3227.00', '0.00', @validFrom),
	-- Import Disposal IsInterim 0 Range 6-20
	 ('ECE0889F-ACA6-4F89-86BE-3C3123A7C0C4', 1, '805CC74A-1D68-44B9-ADC3-A4C90107D231', 'E5D7D07A-1FC3-45AC-AE0F-A4C9010901C7', '3636.00', '409.00', @validFrom),
	-- Import Disposal IsInterim 0 Range 21-100
	 ('8F68E94B-F077-4CE2-8506-854CE912C166', 1, '85270610-00B0-4C09-A1DB-A4C90107D231', 'E5D7D07A-1FC3-45AC-AE0F-A4C9010901C7', '4560.00', '1333.00', @validFrom),
	-- Import Disposal IsInterim 0 Range 101-300
	 ('2F167B34-3A0C-4D2D-BD61-E5DC15A62615', 1, '42ECE92D-6470-4B42-BA6A-D8E7FE65A402', 'E5D7D07A-1FC3-45AC-AE0F-A4C9010901C7', '6597.00', '3370.00', @validFrom),
	-- Import Disposal IsInterim 0 Range 301-500
	 ('8D8E2BEC-69CB-4AAD-9F5E-D1840CB28108', 1, '8810022E-11D4-4C25-880B-185787F65053', 'E5D7D07A-1FC3-45AC-AE0F-A4C9010901C7', '9557.00', '6330.00', @validFrom),
	-- Import Disposal IsInterim 0 Range 501-
	 ('B8CB42E4-B04C-49DD-B074-8F1139E9D1D3', 1, 'AEF5F83D-E5FB-41B2-84D7-A4C90107D231', 'E5D7D07A-1FC3-45AC-AE0F-A4C9010901C7', '11962.00', '8735.00', @validFrom),

	-- Import Disposal IsInterim 1 Range 1-5
	 ('08B0636E-B575-4C3D-8C50-4BB1BE65562D', 1, '87443EEB-31F5-423F-905A-33ABE23F01F6', 'BE00F07B-41E1-4C03-9BB9-A4C9010901C7', '3227.00', '0.00', @validFrom),
	-- Import Disposal IsInterim 1 Range 6-20
	 ('685A92A0-93AB-4F55-B969-D60737F9DCDE', 1, '805CC74A-1D68-44B9-ADC3-A4C90107D231', 'BE00F07B-41E1-4C03-9BB9-A4C9010901C7', '3636.00', '409.00', @validFrom),
	-- Import Disposal IsInterim 1 Range 21-100
	 ('CF170991-DC3A-4200-8309-1C146AD112E2', 1, '85270610-00B0-4C09-A1DB-A4C90107D231', 'BE00F07B-41E1-4C03-9BB9-A4C9010901C7', '4560.00', '1333.00', @validFrom),
	-- Import Disposal IsInterim 1 Range 101-300
	 ('09FF17BD-594D-4767-B7B1-E40973EEDD14', 1, '42ECE92D-6470-4B42-BA6A-D8E7FE65A402', 'BE00F07B-41E1-4C03-9BB9-A4C9010901C7', '6597.00', '3370.00', @validFrom),
	-- Import Disposal IsInterim 1 Range 301-500
	 ('EA8FAC87-53F0-428B-8DFD-319030906D43', 1, '8810022E-11D4-4C25-880B-185787F65053', 'BE00F07B-41E1-4C03-9BB9-A4C9010901C7', '9557.00', '6330.00', @validFrom),
	-- Import Disposal IsInterim 1 Range 501-
	 ('F92251B4-06DD-4B0F-8415-8EB2F72AF511', 1, 'AEF5F83D-E5FB-41B2-84D7-A4C90107D231', 'BE00F07B-41E1-4C03-9BB9-A4C9010901C7', '11962.00', '8735.00', @validFrom);
	 
PRINT N'Updating incorrect entries in  [Lookup].[PricingStructure]...';
update [Lookup].[PricingStructure] SET PotentialRefund = '1790' 
	where id in ('0E91220A-3E59-4D2D-85AE-A4C9010D3F89', 'BCB5D314-4290-42D4-B86D-A4C901135715', '25C459BB-DC46-4385-860E-A4C90113BF20')

update [Lookup].[PricingStructure] SET PotentialRefund = '1630' 
	where id in ('1429BF85-E21B-49FD-89F6-A4C9010D3F89',
	'5F0F3C66-D1CD-4396-A4CA-A4C9010D3F89',
	'A466756B-5D9B-4537-83F6-A4C901135715',
	'86065D45-BF5D-4381-9892-A4C901135715',
	'2FF2FA2D-2653-4480-8E23-A4C90113BF20',
	'88210123-4C43-4438-A33A-A4C90113BF20')
